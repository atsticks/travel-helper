<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Travel Helper</title>
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
</head>
<body>

<div class="container">

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Project name</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
               aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li role="separator" class="divider"></li>
              <li class="dropdown-header">Nav header</li>
              <li><a href="#">Separated link</a></li>
              <li><a href="#">One more separated link</a></li>
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="./">Default <span class="sr-only">(current)</span></a></li>
          <li><a href="../navbar-static-top/">Static top</a></li>
          <li><a href="../navbar-fixed-top/">Fixed top</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
  </nav>

  <div class="row">

    <div class="container">

      <form id="searchForm">
        <div class="form-group">
          <label for="origin">Origin</label>
          <input type="text" class="form-control" id="origin" placeholder="Origin">
        </div>
        <div class="form-group">
          <label for="destination">Destination</label>
          <input type="text" class="form-control" id="destination"
                 placeholder="Destination">
        </div>
        <button type="submit" class="btn btn-primary">Go!!!</button>
      </form>

    </div>

  </div>

  <div class="row">

    <div class="container" id="flights-container">

      <div class="panel panel-info">

        <div class="panel-heading">
          <h3 class="panel-title">Flights</h3>
        </div>
        <div class="panel-body">
          Panel content
        </div>

      </div>

    </div>

  </div>

  <div class="row">

    <div class="container" id="points-container">

      <div class="panel panel-info">

        <div class="panel-heading">
          <h3 class="panel-title">Points</h3>
        </div>
        <div class="panel-body">
          Panel content
        </div>

      </div>

    </div>

  </div>

  <div class="row">

    <div class="container" id="hotels-container">

      <div class="panel panel-info">

        <div class="panel-heading">
          <h3 class="panel-title">Hotels</h3>
        </div>
        <div class="panel-body">

          <table class="table table-hover">
            <thead>
            <tr>
              <th>Firstname</th>
              <th>Lastname</th>
              <th>Email</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>John</td>
              <td>Doe</td>
              <td>john@example.com</td>
            </tr>
            </tbody>
          </table>

        </div>

      </div>

    </div>

  </div>

  <div class="row">

    <div class="container" id="cars-container">

      <div class="panel panel-info">

        <div class="panel-heading">
          <h3 class="panel-title">Cars</h3>
        </div>
        <div class="panel-body">
          Panel content
        </div>

      </div>

    </div>

  </div>

</div>


<h1>Travel Helper</h1>

<h2>Hotels</h2>
<div id="hotels"></div>

<h2>Cars</h2>
<div id="cars"></div>

<h2>Points of Interest</h2>
<div id="points"></div>

<h2>Flights</h2>
<div id="flights"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/sockjs/1.0.0/sockjs.min.js"></script>
<script src="node_modules/vertx3-eventbus-client/vertx-eventbus.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<script>
  var eb = new EventBus('/eventbus/');
  eb.onopen = function () {
    eb.registerHandler('available-hotels-eb', function (err, msg) {
      console.log('HOTELS');
      $('#hotels').prepend('<div>' + msg.body + '</div>');
    });

    eb.registerHandler('available-cars-eb', function (err, msg) {
      console.log('HOTELS');

      $('#cars').prepend('<div>' + msg.body + '</div>');
    });

    eb.registerHandler('available-points-eb', function (err, msg) {
      console.log('POINTS');
      $('#points').prepend('<div>' + msg.body + '</div>');
    });

    eb.registerHandler('available-flights-eb', function (err, msg) {
      console.log('FLIGHTS');
      $('#flights').prepend('<div>' + msg.body + '</div>');
    });

  };

  function processForm( e ){

    var values = { origin : $("#origin").val(), destination : $("#destination").val()};

    console.log(values);

    $.post({
      url: 'http://localhost:8888/api/travel',
      contentType: 'application/json',
      data: values,
      success: function( data, textStatus, jQxhr ){
        $('#response pre').html( data );
      },
      error: function( jqXhr, textStatus, errorThrown ){
        console.log( errorThrown );
      }
    });

    e.preventDefault();
  }

  $( "#searchForm" ).submit( processForm );


</script>

</body>
</html>